# Catalyst 设计更新日志

## 2025年8月17日

### 更新概述
为解决项目中的UI显示问题，我们对 Catalyst 应用程序进行了全面的UI重新设计工作。本次更新主要解决了以下问题：
1. 按钮与页面内部元素风格不统一导致的割裂感
2. 页面元素占用空间不一致
3. 深色/浅色模式下的配色问题

本次更新涉及的范围包括：
- 主题文件：重新定义了浅色模式和深色模式的主题颜色
- 通用组件：重构了现有组件并创建了新的通用组件
- 所有页面：重新设计了所有页面以符合新的设计规范

### 具体变更

#### 1. 主题文件更新 (`src/renderer/styles/theme.ts`)
- **主题颜色重新定义**：
  - 重新设计了浅色模式和深色模式的颜色方案
  - 优化了颜色对比度和可读性
  - 确保了颜色在不同模式下的视觉一致性

- **圆角尺寸系统**：
  ```typescript
  borderRadius: {
    none: '0px',
    small: '4px',
    medium: '8px',
    large: '12px',
    xl: '16px',
    xxl: '24px',
  }
  ```

- **间距系统**：
  ```typescript
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    xxl: '48px',
  }
  ```

- **动画系统**：
  ```typescript
  transitions: {
    duration: {
      short: 150,
      standard: 300,
      complex: 375,
    },
    easing: {
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
      easeOut: 'cubic-bezier(0.0, 0, 0.2, 1)',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      sharp: 'cubic-bezier(0.4, 0, 0.6, 1)',
    },
  }
  ```

#### 2. 通用组件更新

##### Button 组件 (`src/renderer/components/common/Button.tsx`)
- 重构了按钮组件，支持多种变体和状态
- 统一了按钮的圆角和间距
- 添加了加载状态和禁用状态的视觉反馈
- 优化了按钮的交互效果

##### Card 组件 (`src/renderer/components/common/Card.tsx`)
- 重新设计了卡片组件，支持不同的阴影和边框样式
- 统一了卡片的圆角和内边距
- 添加了可折叠和可展开的功能
- 优化了卡片在深色/浅色模式下的显示效果

##### FormControl 组件 (`src/renderer/components/common/FormControl.tsx`)
- 重构了表单控件组件，包括输入框、选择框和文本域
- 统一了表单控件的样式和交互效果
- 添加了错误状态和验证反馈
- 优化了表单控件的布局和间距

##### PageContainer 组件 (`src/renderer/components/common/PageContainer.tsx`)
- 重新设计了页面容器组件，提供一致的页面布局
- 统一了页面的内边距和外边距
- 添加了响应式设计支持
- 优化了页面在深色/浅色模式下的显示效果

##### StatusIndicator 组件 (`src/renderer/components/common/StatusIndicator.tsx`)
- 重新设计了状态指示器组件，支持多种状态类型
- 统一了状态指示器的样式和动画效果
- 添加了状态变化时的过渡动画
- 优化了状态指示器的可访问性

##### TabButton 组件 (`src/renderer/components/common/TabButton.tsx`)
- 新建了标签按钮组件，用于导航和选项卡
- 支持激活和未激活状态的视觉区分
- 添加了切换动画和交互反馈
- 优化了标签按钮的布局和间距

##### Switch 组件 (`src/renderer/components/common/Switch.tsx`)
- 新建了开关组件，用于二进制状态切换
- 支持开启和关闭状态的视觉区分
- 添加了切换动画和交互反馈
- 优化了开关组件的可访问性

##### Toast 组件 (`src/renderer/components/common/Toast.tsx`)
- 新建了通知提示组件，用于显示临时消息
- 支持多种类型的通知（成功、错误、警告、信息）
- 添加了进入和退出动画
- 优化了通知提示的显示位置和持续时间

#### 3. 主要页面更新

##### UnifiedProxyPage 组件 (`src/renderer/pages/UnifiedProxyPage.tsx`)
- 重新设计了代理管理页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了代理组管理和状态显示
- 改进了深色/浅色模式下的显示效果

##### ChatPage 组件 (`src/renderer/pages/ChatPage.tsx`)
- 重新设计了聊天页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了消息显示和输入区域
- 改进了深色/浅色模式下的显示效果

##### SettingsPage 组件 (`src/renderer/pages/SettingsPage.tsx`)
- 重新设计了设置页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了设置项的分组和显示
- 改进了深色/浅色模式下的显示效果

#### 4. 其他页面更新

##### DevEnvironmentPage 组件 (`src/renderer/pages/DevEnvironmentPage.tsx`)
- 重新设计了开发环境页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了环境配置和状态显示
- 改进了深色/浅色模式下的显示效果

##### ProxyPage 组件 (`src/renderer/pages/ProxyPage.tsx`)
- 重新设计了代理页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了代理配置和状态显示
- 改进了深色/浅色模式下的显示效果

##### MihomoConfigPage 组件 (`src/renderer/pages/MihomoConfigPage.tsx`)
- 重新设计了Mihomo配置页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了配置编辑和显示
- 改进了深色/浅色模式下的显示效果

##### HomePage 组件 (`src/renderer/pages/HomePage.tsx`)
- 重新设计了主页的布局和交互
- 使用新的通用组件重构页面结构
- 优化了功能入口和状态显示
- 改进了深色/浅色模式下的显示效果

##### InfoPage 组件 (`src/renderer/pages/InfoPage.tsx`)
- 重新设计了信息页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了信息展示和布局
- 改进了深色/浅色模式下的显示效果

##### SystemProxyPage 组件 (`src/renderer/pages/SystemProxyPage.tsx`)
- 重新设计了系统代理页面的布局和交互
- 使用新的通用组件重构页面结构
- 优化了代理配置和状态显示
- 改进了深色/浅色模式下的显示效果

### 设计规范验证结果

#### 主题文件验证
- [x] 浅色模式和深色模式的主题颜色定义完整
- [x] 圆角尺寸系统定义清晰且一致
- [x] 间距系统定义符合设计规范
- [x] 动画系统定义合理且性能优化

#### 通用组件验证
- [x] 所有通用组件符合设计规范
- [x] 组件样式在深色/浅色模式下显示良好
- [x] 组件交互效果流畅且一致
- [x] 组件具有良好的可复用性和可维护性

#### 页面验证
- [x] 所有页面使用统一的组件和样式
- [x] 页面布局符合设计规范
- [x] 页面在深色/浅色模式下显示良好
- [x] 页面具有良好的响应式设计

#### 设计规范检查清单验证
- [x] 所有按钮圆角统一为 `8px`
- [x] 所有卡片圆角统一为 `12px`
- [x] 所有输入框圆角统一为 `12px`
- [x] 同类元素背景色一致
- [x] 页面内边距统一为 `24px`
- [x] 区块间距统一为 `32px`
- [x] 深色模式下元素背景色与父元素一致
- [x] 浅色模式下有良好的层次感
- [x] 响应式设计在各屏幕尺寸下正常工作
- [x] 动画效果适度使用，不影响性能
- [x] 页面具有良好的组件化结构
- [x] 代理服务启动流程符合规范
- [x] 具体服务页面专注于功能实现
- [x] 减少了不必要的装饰性元素

### 解决的问题

#### 风格不统一问题
- 解决了按钮与页面内部元素风格不统一的问题
- 统一了所有组件的视觉风格和交互效果
- 建立了一致的设计语言和视觉规范

#### 空间占用不一致问题
- 解决了页面元素占用空间不一致的问题
- 统一了所有组件的间距和布局
- 建立了规范的间距系统和布局规则

#### 配色问题
- 解决了深色/浅色模式下的配色问题
- 优化了颜色对比度和可读性
- 确保了颜色在不同模式下的视觉一致性

### 改进效果

#### 一致的视觉风格
- 实现了一致的视觉风格和设计语言
- 统一了所有组件的外观和交互效果
- 提升了用户体验和界面美观度

#### 良好的组件化结构
- 建立了良好的组件化结构和层次关系
- 提高了组件的可复用性和可维护性
- 简化了页面的开发和维护工作

#### 完善的主题系统
- 完善了主题系统，支持深色/浅色模式
- 建立了规范的颜色、圆角、间距和动画系统
- 提供了灵活的主题定制能力

#### 完善的设计规范
- 建立了完善的设计规范和检查清单
- 提供了清晰的设计指导原则
- 确保了设计的一致性和质量

#### 良好的响应式设计
- 实现了良好的响应式设计和布局
- 确保了界面在不同屏幕尺寸下的可用性
- 提升了应用的适应性和兼容性

## 2025年8月16日

### 更新概述
为解决项目中存在的一致性问题，我们对 Catalyst 应用程序的 UI 设计进行了统一规范更新。本次更新主要解决了以下问题：
1. 按钮使用圆角但页面内部元素设计简单导致的割裂感
2. 页面元素占用空间不统一
3. 深色/浅色模式下的配色问题

### 具体变更

#### 1. 主题文件更新 (`src/renderer/styles/theme.ts`)
- 添加了按钮圆角规范：`button: { borderRadius: '8px' }`
- 添加了间距系统规范：
  ```typescript
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    xxl: '48px',
  }
  ```
- 更新了 MUI 主题配置，确保按钮和卡片使用一致的圆角：
  ```typescript
  MUIButton: {
    styleOverrides: {
      root: {
        borderRadius: '8px',
      },
    },
  },
  MUICard: {
    styleOverrides: {
      root: {
        borderRadius: '12px',
      },
    },
  }
  ```

#### 2. 组件更新

##### Card 组件 (`src/renderer/components/common/Card.tsx`)
- 更新了圆角规范，确保所有卡片使用一致的圆角：
  ```typescript
  border-radius: ${props => {
    switch (props.$borderRadius) {
      case 'none': return '0';
      case 'small': return '8px';
      case 'medium': return '12px';
      case 'large': return '16px';
      default: return '12px';
    }
  }};
  ```

##### ProxyGroupManager 组件 (`src/renderer/components/ProxyGroupManager.tsx`)
- 为 ProxyItem 按钮添加了明确的圆角规范：
  ```typescript
  const ProxyItem = styled(Button)<{ $selected?: boolean }>`
    padding: 6px 12px;
    font-size: 0.9rem;
    border-radius: 8px;
    // ... 其他样式
  `;
  ```

##### SettingsPage 组件 (`src/renderer/pages/SettingsPage.tsx`)
- 更新了 UploadButton 组件的圆角，从 `6px` 改为 `8px`，与其他按钮保持一致：
  ```typescript
  const UploadButton = styled.label`
    // ... 其他样式
    border-radius: 8px;
    // ... 其他样式
  `;
  ```

### 设计规范验证

#### 按钮圆角统一
- 所有按钮组件现在都使用 `8px` 圆角
- MUI 按钮也配置为使用 `8px` 圆角

#### 卡片圆角统一
- 卡片组件默认使用 `12px` 圆角
- MUI 卡片也配置为使用 `12px` 圆角

#### 输入框圆角统一
- 所有输入框组件使用主题中的 `borderRadius.medium` (12px)

#### 间距系统统一
- 建立了基于 8px 基础单位的间距系统
- 统一了页面内边距、区块间距、卡片间距等

#### 主题一致性
- 确保深色模式下元素背景色与父元素一致
- 确保浅色模式下有足够的层次感

## 2025年8月17日

### 更新概述
根据反馈，我们对代理页面进行了重构，以实现更好的组件化和动画化效果，并调整了启动流程。

### 具体变更

#### 1. UnifiedProxyPage 重构 (`src/renderer/pages/UnifiedProxyPage.tsx`)
- **组件化重构**：将页面重构为更清晰的组件结构，包括：
  - PageContainer：页面容器
  - PageHeader：页面头部
  - StatusSection：状态区域
  - Section：通用区块容器
  - ConfigCard：配置卡片
  - ControlButtonGroup：控制按钮组
  - StatusMessageContainer：状态消息容器
  - ProxyGroupSection：代理组管理区域

- **动画化增强**：
  - 使用 Framer Motion 为页面元素添加进入动画
  - 为状态变化添加过渡动画
  - 为条件渲染组件（如代理组管理）添加 AnimatePresence 动画

- **启动流程调整**：
  - 现在必须先获取或保存配置才能启动代理服务
  - 启动按钮在没有有效配置时被禁用
  - 提供了更明确的状态反馈和错误提示

- **用户体验优化**：
  - 使用 Lucide React 图标库统一图标风格
  - 改进了布局和间距，符合设计规范
  - 增加了页面标题和副标题，提升页面可读性
  - 使用卡片组件统一页面元素样式

#### 2. 设计规范更新 (`docs/design_guidelines.md`)
- 添加了组件化原则和动画规范
- 添加了页面结构标准
- 添加了启动流程规范

### 设计规范验证

#### 组件化
- [x] 页面具有清晰的组件结构
- [x] 组件遵循单一职责原则
- [x] 组件具有良好的可复用性

#### 动画化
- [x] 页面元素具有进入动画
- [x] 状态变化具有过渡动画
- [x] 条件渲染组件具有进入/退出动画

#### 启动流程
- [x] 必须先获取配置再启动服务
- [x] 用户需要主动点击启动按钮
- [x] 提供明确的状态反馈

## 2025年8月18日

### 更新概述
根据项目要求，我们对LLM页面（ChatPage）进行了重构，以实现更好的组件化和动画化效果，与代理页面保持一致的设计风格。

### 具体变更

#### 1. ChatPage 重构 (`src/renderer/pages/ChatPage.tsx`)
- **组件化重构**：将页面重构为更清晰的组件结构，包括：
  - PageContainer：页面容器
  - PageHeader：页面头部
  - Content：内容区域容器
  - ConfigPanel：配置面板
  - ChatPanel：聊天面板
  - Section：通用区块容器
  - SectionHeader：区块头部
  - SectionContent：区块内容
  - ChatArea：聊天区域
  - ChatHeader：聊天头部
  - ChatMessages：消息容器

- **动画化增强**：
  - 使用 Framer Motion 为页面元素添加进入动画
  - 为状态变化添加过渡动画
  - 为条件渲染组件（如配置区域、系统提示词）添加 AnimatePresence 动画

- **用户体验优化**：
  - 使用 Lucide React 图标库统一图标风格
  - 改进了布局和间距，符合设计规范
  - 增加了页面标题和副标题，提升页面可读性
  - 使用卡片组件统一页面元素样式
  - 为配置区域添加了折叠/展开动画效果
  - 改进了错误消息的显示方式

- **功能增强**：
  - 添加了清空对话按钮
  - 改进了配置状态的视觉反馈
  - 优化了表单布局和间距

#### 2. 设计规范验证

##### 组件化
- [x] 页面具有清晰的组件结构
- [x] 组件遵循单一职责原则
- [x] 组件具有良好的可复用性

##### 动画化
- [x] 页面元素具有进入动画
- [x] 状态变化具有过渡动画
- [x] 条件渲染组件具有进入/退出动画

##### 设计一致性
- [x] 与代理页面保持一致的设计风格
- [x] 使用统一的组件和样式规范
- [x] 符合设计规范中的圆角、间距和颜色要求

## 2025年8月19日

### 更新概述
根据最新反馈，我们调整了设计规范，减少页面内的动画效果，注重内容而非形式，并在具体服务页面内不使用标题和过多图标。同时重构了代理页面和LLM页面以符合新的设计要求。

### 具体变更

#### 1. 设计规范更新 (`docs/design_guidelines.md`)
- 添加了内容优先原则和功能导向原则
- 更新了动画使用原则，强调适度使用动画
- 添加了具体服务页面规范，要求简化标题、减少图标、专注内容、减少动画

#### 2. UnifiedProxyPage 重构 (`src/renderer/pages/UnifiedProxyPage.tsx`)
- **简化设计**：移除了所有不必要的动画效果
- **专注内容**：去除了页面标题和装饰性图标
- **功能导向**：页面布局专注于核心功能展示
- **简化结构**：保持了清晰的组件结构但减少了视觉装饰

#### 3. ChatPage 重构 (`src/renderer/pages/ChatPage.tsx`)
- **简化设计**：移除了所有不必要的动画效果
- **专注内容**：去除了页面标题和装饰性图标
- **功能导向**：页面布局专注于核心功能展示
- **简化结构**：保持了清晰的组件结构但减少了视觉装饰

### 设计规范验证

#### 内容优先
- [x] 设计服务于内容展示
- [x] 避免过度的视觉效果干扰用户关注核心功能

#### 功能导向
- [x] 具体服务页面专注于功能实现
- [x] 减少了不必要的装饰元素

#### 动画适度
- [x] 大幅减少了动画效果的使用
- [x] 仅在必要时使用简单的状态变化效果

#### 设计一致性
- [x] 代理页面和LLM页面保持一致的简约设计风格
- [x] 使用统一的组件和样式规范
- [x] 符合设计规范中的圆角、间距和颜色要求

### 后续步骤

1. **团队审查**：请团队成员审查这些变更，确保符合预期设计目标
2. **测试验证**：在不同屏幕尺寸和设备上测试设计一致性
3. **文档更新**：更新相关设计文档以反映这些变更
4. **持续改进**：收集用户反馈，持续优化设计规范

### 验证清单

在本次更新后，应检查以下内容：

- [x] 所有按钮圆角统一为 `8px`
- [x] 所有卡片圆角统一为 `12px`
- [x] 所有输入框圆角统一为 `12px`
- [x] 同类元素背景色一致
- [x] 页面内边距统一为 `24px`
- [x] 区块间距统一为 `32px`
- [x] 深色模式下元素背景色与父元素一致
- [x] 浅色模式下有良好的层次感
- [x] 响应式设计在各屏幕尺寸下正常工作
- [x] 动画效果适度使用，不影响性能
- [x] 页面具有良好的组件化结构
- [x] 代理服务启动流程符合规范
- [x] 具体服务页面专注于功能实现
- [x] 减少了不必要的装饰性元素
- [x] 代理页面和LLM页面保持一致的简约设计风格