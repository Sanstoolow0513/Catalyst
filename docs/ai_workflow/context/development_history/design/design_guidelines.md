# Catalyst 设计规范指南

## 1. 概述

本文档旨在统一 Catalyst 应用程序的 UI 设计规范，解决当前存在的设计不一致问题，包括：
- 按钮与页面内部元素风格不统一
- 页面元素占用空间不一致
- 深色/浅色模式下的配色问题

## 2. 设计原则

### 2.1 一致性原则
所有 UI 元素应遵循统一的设计语言，确保用户在不同页面间切换时有一致的体验。

### 2.2 简洁性原则
界面应保持简洁，避免过度设计，确保核心功能突出。

### 2.3 可访问性原则
确保所有用户都能轻松使用应用，包括视觉障碍用户。

### 2.4 内容优先原则
设计应服务于内容展示，避免过度的视觉效果干扰用户关注核心功能。

### 2.5 功能导向原则
具体服务页面应专注于功能实现，减少不必要的装饰元素。

## 3. 颜色规范

### 3.1 主题颜色
我们定义了两套主题颜色：浅色模式和深色模式。

#### 浅色模式 (Light Theme)
```typescript
export const lightTheme = {
  // 基础背景色
  background: '#F9FAFB',      // 页面背景
  foreground: '#FFFFFF',      // 前景元素背景
  surface: '#FFFFFF',         // 卡片、面板背景
  surfaceVariant: '#F3F4F6',  // 变体表面（如输入框背景）

  // 文本颜色
  textPrimary: '#111827',     // 主要文本
  textSecondary: '#4B5563',   // 次要文本
  textTertiary: '#9CA3AF',    // 第三级文本（如占位符）

  // 边框颜色
  border: '#E5E7EB',          // 标准边框
  borderLight: '#F3F4F6',     // 浅边框
  divider: '#E5E7EB',         // 分隔线

  // 主要颜色
  primary: {
    main: '#2563EB',          // 主色
    light: '#3B82F6',
    dark: '#1D4ED8',
    contrastText: '#FFFFFF',
  },

  // 次要颜色
  secondary: {
    main: '#64748B',
    light: '#94A3B8',
    dark: '#475569',
    contrastText: '#FFFFFF',
  },

  // 强调色
  accent: '#7C3AED',
  accentHover: '#6D28D9',

  // 状态颜色
  success: { main: '#10B981', light: '#34D399', dark: '#059669', contrastText: '#FFFFFF' },
  error: { main: '#EF4444', light: '#F87171', dark: '#DC2626', contrastText: '#FFFFFF' },
  warning: { main: '#F59E0B', light: '#FBBF24', dark: '#D97706', contrastText: '#FFFFFF' },
  info: { main: '#06B6D4', light: '#22D3EE', dark: '#0891B2', contrastText: '#FFFFFF' },
};
```

#### 深色模式 (Dark Theme)
```typescript
export const darkTheme = {
  // 基础背景色
  background: '#030712',      // 页面背景
  foreground: '#111827',      // 前景元素背景
  surface: '#111827',         // 卡片、面板背景
  surfaceVariant: '#1F2937',  // 变体表面（如输入框背景）

  // 文本颜色
  textPrimary: '#F9FAFB',     // 主要文本
  textSecondary: '#9CA3AF',   // 次要文本
  textTertiary: '#4B5563',    // 第三级文本（如占位符）

  // 边框颜色
  border: '#374151',          // 标准边框
  borderLight: '#4B5563',     // 浅边框
  divider: '#374151',         // 分隔线

  // 主要颜色
  primary: {
    main: '#3B82F6',          // 主色
    light: '#60A5FA',
    dark: '#2563EB',
    contrastText: '#FFFFFF',
  },

  // 次要颜色
  secondary: {
    main: '#94A3B8',
    light: '#CBD5E1',
    dark: '#64748B',
    contrastText: '#030712',
  },

  // 强调色
  accent: '#A78BFA',
  accentHover: '#8B5CF6',

  // 状态颜色
  success: { main: '#34D399', light: '#6EE7B7', dark: '#10B981', contrastText: '#FFFFFF' },
  error: { main: '#F87171', light: '#FCA5A5', dark: '#EF4444', contrastText: '#FFFFFF' },
  warning: { main: '#FBBF24', light: '#FCD34D', dark: '#F59E0B', contrastText: '#FFFFFF' },
  info: { main: '#22D3EE', light: '#67E8F9', dark: '#06B6D4', contrastText: '#FFFFFF' },
};
```

### 3.2 颜色使用规范

1. **背景色一致性**：确保同一层级的元素使用相同的背景色，避免在同一页面中混用 `surface` 和 `foreground`。
2. **文本对比度**：确保文本与背景有足够的对比度，满足 WCAG 2.0 AA 级别要求。
3. **状态颜色**：统一使用定义的状态颜色，不要使用其他颜色表示相同状态。

## 4. 圆角规范

### 4.1 圆角尺寸
```typescript
borderRadius: {
  small: '8px',    // 小圆角，用于按钮、标签等小元素
  medium: '12px',  // 中圆角，用于卡片、输入框等
  large: '16px',   // 大圆角，用于页面容器、模态框等
  xlarge: '20px',  // 超大圆角，用于特殊场景
}
```

### 4.2 圆角使用规范

1. **按钮**：统一使用 `8px` 圆角
2. **卡片**：统一使用 `12px` 圆角
3. **输入框**：统一使用 `12px` 圆角
4. **页面容器**：统一使用 `16px` 圆角
5. **模态框**：统一使用 `16px` 圆角

## 5. 间距规范

### 5.1 间距系统
使用 8px 作为基础间距单位，建立一致的间距系统：

- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- xxl: 48px

### 5.2 内边距规范

1. **卡片内边距**：
   - 小卡片：`12px`
   - 中卡片：`16px`
   - 大卡片：`24px`

2. **页面内边距**：`24px`

3. **表单元素间距**：
   - 标签与输入框：`8px`
   - 表单组之间：`12px`
   - 表单行之间：`20px`

### 5.3 外边距规范

1. **页面元素之间**：`24px`
2. **卡片之间**：`24px`
3. **按钮组之间**：`12px`

## 6. 组件规范

### 6.1 按钮 (Button)

#### 设计规范
- 圆角：`8px`
- 内边距：
  - small: `6px 12px`
  - medium: `8px 16px`
  - large: `12px 24px`
- 字体权重：`500`
- 过渡动画：`all 150ms ease`

#### 变体规范
1. **Primary**：主色背景，白色文字
2. **Secondary**：次色背景，白色文字
3. **Danger**：错误色背景，白色文字
4. **Ghost**：透明背景，主色边框和文字
5. **Outline**：透明背景，主色边框和文字

### 6.2 卡片 (Card)

#### 设计规范
- 圆角：`12px`
- 内边距：
  - none: `0`
  - small: `12px`
  - medium: `16px`
  - large: `24px`
- 阴影：
  - 默认：`0 1px 2px 0 rgba(0, 0, 0, 0.05)`
  - 悬停：`0 4px 12px 0 rgba(0, 0, 0, 0.08)` (浅色) / `0 4px 12px 0 rgba(0, 0, 0, 0.15)` (深色)

### 6.3 输入框 (Input/Textarea)

#### 设计规范
- 圆角：`12px`
- 内边距：`10px 12px`
- 边框：`1px solid`
- 背景色：根据主题使用 `inputBackground`
- 文字颜色：根据主题使用 `textPrimary`
- 聚焦状态：边框色变为主题主色，并添加 `box-shadow: 0 0 0 2px {accent}40`

### 6.4 表单组 (FormGroup)

#### 设计规范
- 布局：垂直排列
- 标签下边距：`8px`
- 表单组下边距：`12px`

## 7. 页面布局规范

### 7.1 页面容器
- 最大宽度：`1200px`
- 内边距：`24px`
- 水平居中

### 7.2 页面标题
- 字体大小：`2rem`
- 字体权重：`700`
- 下边距：`32px`

### 7.3 区块标题
- 字体大小：`1.5rem`
- 字体权重：`600`
- 下边距：`24px`

### 7.4 区块间距
- 区块之间：`32px`

## 8. 响应式设计规范

### 8.1 断点
- 小屏幕：`< 768px`
- 中等屏幕：`768px - 1024px`
- 大屏幕：`> 1024px`

### 8.2 响应式策略
1. 在小屏幕上，网格布局应变为单列
2. 按钮在小屏幕上应保持最小触摸目标（至少 44px）
3. 内边距在小屏幕上可适当减少

## 9. 动画规范

### 9.1 过渡时间
- fast: `150ms`
- normal: `300ms`
- slow: `500ms`

### 9.2 动画缓动
- 默认使用 `ease`
- 弹性效果使用 `cubic-bezier(0.34, 1.56, 0.64, 1)`

### 9.3 动画使用原则
1. **适度使用**：仅在必要时使用动画，避免过度使用影响性能
2. **功能导向**：动画应服务于功能理解，而非纯粹装饰
3. **性能优先**：优先使用 CSS 动画而非 JavaScript 动画
4. **具体服务页面**：在具体服务页面中减少或避免不必要的动画效果

## 10. 组件化规范

### 10.1 页面结构
所有页面应遵循以下结构：
```tsx
const PageContainer = styled.div`
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
`;

const PageHeader = styled.div`
  margin-bottom: 32px;
`;

const Section = styled.section`
  margin-bottom: 32px;
`;

const SectionHeader = styled.div`
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
`;

const SectionTitle = styled.h2`
  font-size: 1.5rem;
  font-weight: 600;
  color: ${props => props.theme.textPrimary};
  margin: 0;
`;
```

### 10.2 组件化原则
1. **可复用性**：组件应设计为可复用的，避免重复代码
2. **单一职责**：每个组件应只负责一个功能
3. **组合优于继承**：通过组合小组件构建复杂组件
4. **状态管理**：合理使用 React Hooks 管理组件状态

### 10.3 具体服务页面规范
1. **简化标题**：具体服务页面可省略页面标题，直接展示功能区域
2. **减少图标**：避免在功能区域使用过多装饰性图标
3. **专注内容**：页面布局应突出核心功能和内容展示
4. **减少动画**：在具体服务页面中减少或避免不必要的动画效果

## 11. 启动流程规范

### 11.1 代理服务启动流程
1. **配置检查**：在启动前必须检查是否存在有效配置
2. **用户确认**：由用户主动点击启动按钮
3. **状态反馈**：提供明确的启动状态反馈
4. **错误处理**：提供清晰的错误信息和解决建议

### 11.2 配置管理流程
1. **配置获取**：优先从本地加载配置，其次从 URL 获取
2. **配置验证**：保存前验证配置格式和内容
3. **配置保存**：提供保存成功/失败的反馈
4. **配置同步**：确保配置在应用重启后仍然有效

## 12. 实施建议

### 12.1 组件重构
1. 统一所有按钮的圆角为 `8px`
2. 统一卡片的圆角为 `12px`
3. 统一输入框的圆角为 `12px`
4. 确保同类元素使用相同的背景色

### 12.2 页面布局优化
1. 统一页面内边距为 `24px`
2. 统一区块间距为 `32px`
3. 统一卡片间距为 `24px`

### 12.3 主题一致性
1. 确保深色模式下元素背景色与父元素一致
2. 确保浅色模式下有足够的层次感
3. 统一状态颜色的使用

### 12.4 设计系统更新
1. 更新 `theme.ts` 文件以反映新的设计规范
2. 更新组件样式以符合新的规范
3. 在文档中明确标注设计规范

### 12.5 动画和组件化
1. 适度使用动画效果，避免过度使用
2. 重构页面为组件化结构，提高可维护性
3. 确保动画效果流畅且不影响性能
4. 在具体服务页面中减少不必要的动画效果

## 13. 验证清单

在实施设计规范后，应检查以下内容：

1. [ ] 所有按钮圆角统一为 `8px`
2. [ ] 所有卡片圆角统一为 `12px`
3. [ ] 所有输入框圆角统一为 `12px`
4. [ ] 同类元素背景色一致
5. [ ] 页面内边距统一为 `24px`
6. [ ] 区块间距统一为 `32px`
7. [ ] 深色模式下元素背景色与父元素一致
8. [ ] 浅色模式下有良好的层次感
9. [ ] 响应式设计在各屏幕尺寸下正常工作
10. [ ] 动画效果适度使用，不影响性能
11. [ ] 页面具有良好的组件化结构
12. [ ] 代理服务启动流程符合规范
13. [ ] 具体服务页面专注于功能实现
14. [ ] 减少了不必要的装饰性元素