# 编码规范

## 1. 编程语言规范

### 1.1 TypeScript 规范
- 使用严格的 TypeScript 配置 (strict: true)
- 为所有函数参数、返回值和变量添加类型注解
- 使用接口和类型别名定义复杂类型
- 合理使用泛型提高代码复用性
- 避免使用 any 类型，除非在特定情况下

### 1.2 命名规范
- 使用 PascalCase 命名组件和类
- 使用 camelCase 命名变量和函数
- 使用 UPPER_SNAKE_CASE 命名常量
- 使用 kebab-case 命名文件和目录
- 布尔值变量使用 is、has、can 等前缀

### 1.3 注释规范
- 使用 JSDoc 为所有公共函数和类添加注释
- 复杂逻辑需要添加行内注释
- 注释应描述为什么而非是什么
- 保持注释与代码同步更新

## 2. React 开发规范

### 2.1 组件规范
- 优先使用函数组件和 Hooks
- 组件文件应只包含一个主要组件
- 合理拆分大型组件为小组件
- 使用 React.memo 优化性能
- 使用 useCallback 和 useMemo 优化渲染

### 2.2 状态管理
- 优先使用 useState 和 useReducer 管理组件状态
- 复杂状态管理考虑使用 Context API
- 避免在渲染函数中创建新对象或函数
- 合理使用 useEffect 处理副作用

### 2.3 事件处理
- 使用函数式更新避免闭包问题
- 事件处理函数命名使用 handle 开头
- 合理使用事件委托
- 注意事件处理函数的性能优化

## 3. 样式规范

### 3.1 Styled Components 规范
- 使用 styled-components 管理样式
- 避免使用内联样式
- 合理使用主题变量
- 组件样式与逻辑分离

### 3.2 CSS 规范
- 使用 flexbox 和 grid 布局
- 避免使用 !important
- 合理使用 CSS 变量
- 保持样式的一致性

## 4. 代码组织规范

### 4.1 目录结构
- 遵循项目定义的目录结构
- 合理分组相关功能
- 避免循环依赖
- 保持目录结构清晰

### 4.2 文件组织
- 一个文件只负责一个功能
- 合理使用 index.ts 导出模块
- 保持文件大小适中
- 使用 barrel exports 简化导入

## 5. 错误处理规范

### 5.1 异常处理
- 合理使用 try/catch 处理异常
- 为异步操作添加错误处理
- 提供用户友好的错误提示
- 记录错误日志用于调试

### 5.2 类型检查
- 充分利用 TypeScript 的类型检查
- 为 API 返回数据定义类型
- 处理可能为 null 或 undefined 的值
- 使用类型守卫确保类型安全

## 6. 测试规范

### 6.1 单元测试
- 为关键业务逻辑编写单元测试
- 使用 Jest 作为测试框架
- 保持测试用例的独立性
- 合理使用 mock 和 spy

### 6.2 集成测试
- 为关键功能流程编写集成测试
- 使用 React Testing Library 进行组件测试
- 模拟真实用户交互场景
- 确保测试覆盖率

## 7. 性能优化规范

### 7.1 渲染优化
- 避免不必要的重新渲染
- 使用虚拟滚动处理大量数据
- 合理使用懒加载
- 优化图片和资源加载

### 7.2 网络优化
- 合理使用缓存策略
- 减少不必要的网络请求
- 使用请求合并
- 处理网络错误和超时

## 8. 安全规范

### 8.1 数据安全
- 敏感信息加密存储
- 避免在日志中记录敏感信息
- 合理设置权限控制
- 防止 XSS 和 CSRF 攻击

### 8.2 通信安全
- 使用 HTTPS 进行网络通信
- 验证 API 响应数据
- 合理处理跨域请求
- 防止中间人攻击