# Clash服务架构重构测试计划

## 概述

本文档描述了如何测试新重构的Clash服务架构，以确保所有功能正常工作并且没有引入新的问题。

## 测试环境

- 操作系统: Windows 10
- Node.js版本: 与项目兼容的版本
- Electron版本: 与项目兼容的版本

## 测试步骤

### 1. 启动应用程序
- [ ] 启动应用程序，确保没有启动错误
- [ ] 检查主窗口是否正常显示

### 2. Clash核心服务测试
- [ ] 删除现有的clash核心文件（如果存在）
- [ ] 点击"启动Clash"按钮
- [ ] 验证应用程序是否自动下载Mihomo核心
- [ ] 验证下载的文件是否正确解压并放置在正确位置

### 3. Clash配置服务测试
- [ ] 检查配置文件URL列表是否正确加载
- [ ] 验证应用程序是否能从URL下载配置文件
- [ ] 验证下载的配置文件是否正确保存

### 4. 代理服务测试
- [ ] 启动Clash服务后，验证系统代理是否正确设置
- [ ] 停止Clash服务后，验证系统代理是否正确清除
- [ ] 检查Windows注册表中的代理设置是否正确

### 5. 功能测试
- [ ] 启动Clash服务，验证状态是否正确更新为"运行中"
- [ ] 停止Clash服务，验证状态是否正确更新为"已停止"
- [ ] 在Clash运行时，点击"刷新节点"按钮，验证节点列表是否正确显示
- [ ] 尝试切换不同的代理节点，验证切换是否成功
- [ ] 检查通知消息是否正确显示

### 6. 错误处理测试
- [ ] 断开网络连接，尝试启动Clash服务，验证错误处理
- [ ] 提供无效的配置文件URL，验证错误处理
- [ ] 在Clash运行时关闭应用程序，验证清理功能是否正常工作

### 7. 性能测试
- [ ] 启动Clash服务，记录启动时间
- [ ] 停止Clash服务，记录停止时间
- [ ] 切换代理节点，记录响应时间

## 预期结果

所有测试步骤都应该通过，没有错误或异常。应用程序应该稳定运行，所有功能都应该按预期工作。

## 回归测试

在完成重构后，还应该进行回归测试，确保其他功能没有受到影响：

- [ ] 系统信息显示功能
- [ ] 软件安装功能
- [ ] 用户认证功能
- [ ] 其他现有功能

## 测试完成标准

- 所有测试步骤都通过
- 没有发现新的bug或问题
- 应用程序性能符合预期
- 用户体验没有下降